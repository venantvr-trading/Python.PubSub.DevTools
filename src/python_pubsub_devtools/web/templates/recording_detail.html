<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>{{ recording.session_name }} - Event Recorder</title>
    <link href="{{ url_for('static', filename='css/recording_detail.css') }}" rel="stylesheet">
</head>
<body>
<div class="container">
    <div class="header">
        <a class="back-link" href="/">‚Üê Back to recordings</a>
        <h1>{{ recording.session_name }}</h1>
        <p>Recorded on {{ recording.created_at }}</p>
    </div>

    <div class="content">
        <div class="info-grid">
            <div class="info-card">
                <div class="info-label">Duration</div>
                <div class="info-value">{{ recording.duration }}</div>
            </div>
            <div class="info-card">
                <div class="info-label">Total Events</div>
                <div class="info-value">{{ recording.event_count }}</div>
            </div>
            <div class="info-card">
                <div class="info-label">Event Types</div>
                <div class="info-value">{{ recording.unique_events }}</div>
            </div>
            <div class="info-card">
                <div class="info-label">Events/Second</div>
                <div class="info-value">{{ recording.events_per_second }}</div>
            </div>
        </div>

        <div class="controls">
            <div class="controls-header">üéÆ Replay Controls</div>
            <div class="controls-buttons">
                <button class="control-btn" disabled title="Skip to start">‚èÆÔ∏è</button>
                <button class="control-btn" disabled title="Previous">‚è™</button>
                <button class="control-btn play-btn" disabled title="Play">‚ñ∂Ô∏è</button>
                <button class="control-btn" disabled title="Pause">‚è≠Ô∏è</button>
                <button class="control-btn" disabled title="Next">‚è©</button>
                <button class="control-btn" disabled title="Skip to end">‚è≠Ô∏è</button>

                <div class="speed-control">
                    <span class="speed-label">Speed:</span>
                    <select class="speed-select" disabled>
                        <option>0.1x</option>
                        <option>0.5x</option>
                        <option selected>1x</option>
                        <option>2x</option>
                        <option>5x</option>
                        <option>10x</option>
                    </select>
                </div>
                <span style="margin-left: auto; color: #999; font-size: 0.9em;">
                        (Replay functionality coming soon)
                    </span>
            </div>
        </div>

        <div class="timeline-container">
            <div class="timeline-header">
                <div class="timeline-title">üìä Event Timeline ({{ recording.event_count }} events)</div>
                <input class="filter-input" id="event-filter" onkeyup="filterEvents()" placeholder="Filter events..." type="text">
            </div>
            <div class="timeline-events" id="timeline-events">
                {% for event in events %}
                <div class="timeline-event" data-event-name="{{ event.event_name }}">
                    <div class="event-header">
                        <div class="event-name">{{ event.event_name }}</div>
                        <div class="event-time">+{{ event.timestamp_offset_ms }}ms</div>
                    </div>
                    <div class="event-details">
                        <span class="event-source">Source: {{ event.source }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">üìà Event Distribution</div>
            <div class="bar-chart">
                {% for event_name, count in event_counts.items() %}
                <div class="bar-item">
                    <div class="bar-label" title="{{ event_name }}">{{ event_name }}</div>
                    <div class="bar-fill-container">
                        <div class="bar-fill" style="width: {{ (count / max_count * 100)|int }}%"></div>
                    </div>
                    <div class="bar-value">{{ count }}</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/recording_detail.js') }}"></script>
</body>
</html>
