<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Scenario Testing Dashboard</title>
    <link href="{{ url_for('static', filename='css/scenario_testing.css') }}" rel="stylesheet">
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üéØ Scenario Testing Dashboard</h1>
        <p>Declarative testing with chaos engineering</p>
    </div>

    <div class="navbar">
        <a class="nav-link" href="http://localhost:5555">Event Flow</a>
        <a class="nav-link" href="http://localhost:5556">Recorder</a>
        <a class="nav-link" href="http://localhost:5557">Exchange</a>
        <a class="nav-link active" href="http://localhost:5558">Testing</a>
    </div>

    <div class="content">
        <div class="info-box">
            üí° Select a scenario from the list below and click "Run Test" to execute. Results will appear in real-time.
        </div>

        <div class="grid-container">
            <!-- Left: Scenarios list -->
            <div class="panel">
                <div class="panel-title">üìã Available Scenarios</div>
                <div class="scenarios-list" id="scenarios-list">
                    <div style="text-align: center; color: #6c757d; padding: 20px;">
                        Loading scenarios...
                    </div>
                </div>
            </div>

            <!-- Right: Configuration and execution -->
            <div class="panel">
                <div class="panel-title">‚öôÔ∏è Test Configuration</div>

                <div id="scenario-config" style="display: none;">
                    <div class="control-group">
                        <label class="control-label">Selected Scenario</label>
                        <div id="selected-scenario-name" style="font-weight: 600; color: #667eea;">-</div>
                    </div>

                    <div class="tab-container">
                        <div class="tab active" onclick="switchTab('preview')">Preview</div>
                        <div class="tab" onclick="switchTab('config')">Configuration</div>
                    </div>

                    <div class="tab-content active" id="tab-preview">
                        <div class="scenario-preview" id="scenario-preview">
                            Select a scenario to see its configuration
                        </div>
                    </div>

                    <div class="tab-content" id="tab-config">
                        <div class="control-group">
                            <label class="control-label">Verbose Output</label>
                            <input id="verbose-checkbox" type="checkbox"> Enable verbose logging
                        </div>
                        <div class="control-group">
                            <label class="control-label">Save Recording</label>
                            <input checked id="recording-checkbox" type="checkbox"> Record events during execution
                        </div>
                    </div>

                    <div style="margin-top: 20px; display: flex; gap: 10px; align-items: center;">
                        <button class="btn btn-primary" id="run-btn" onclick="runTest()">‚ñ∂Ô∏è Run Test</button>
                        <button class="btn btn-danger" disabled id="stop-btn" onclick="stopTest()">‚èπ Stop</button>
                        <span class="status-badge status-idle" id="status-badge">‚óè Idle</span>
                    </div>
                </div>

                <div id="no-scenario" style="text-align: center; color: #6c757d; padding: 40px;">
                    ‚Üê Select a scenario to configure and run
                </div>
            </div>
        </div>

        <!-- Results section -->
        <div id="results-section" style="display: none;">
            <div class="panel execution-panel">
                <div class="panel-title">üìä Execution Results</div>

                <div class="results-grid">
                    <div class="stat-card">
                        <div class="stat-label">Status</div>
                        <div class="stat-value" id="result-status">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Duration</div>
                        <div class="stat-value" id="result-duration">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Assertions Passed</div>
                        <div class="stat-value success" id="result-assertions">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Events Recorded</div>
                        <div class="stat-value" id="result-events">-</div>
                    </div>
                </div>

                <div class="tab-container">
                    <div class="tab active" onclick="switchResultTab('log')">Execution Log</div>
                    <div class="tab" onclick="switchResultTab('assertions')">Assertions</div>
                    <div class="tab" onclick="switchResultTab('chaos')">Chaos Report</div>
                </div>

                <div class="tab-content active" id="result-tab-log">
                    <div class="execution-log" id="execution-log">
                        <div class="log-entry log-info">Waiting for test execution...</div>
                    </div>
                </div>

                <div class="tab-content" id="result-tab-assertions">
                    <div class="assertions-list" id="assertions-list">
                        No assertions to display yet
                    </div>
                </div>

                <div class="tab-content" id="result-tab-chaos">
                    <div class="chaos-config" id="chaos-report">
                        No chaos report available yet
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>üéØ Scenario Testing Dashboard | Port 5558 | <kbd>Ctrl+R</kbd> to refresh</p>
    </div>
</div>

<button class="refresh-btn" onclick="location.reload()" title="Refresh">
    ‚Üª
</button>

<button class="dark-mode-btn" id="dark-mode-btn" onclick="toggleDarkMode()" title="Toggle Dark Mode">
    üåô
</button>

<script src="{{ url_for('static', filename='js/scenario_testing.js') }}"></script>
</body>
</html>
