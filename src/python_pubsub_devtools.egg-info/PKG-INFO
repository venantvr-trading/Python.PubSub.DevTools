Metadata-Version: 2.4
Name: python_pubsub_devtools
Version: 0.2.0
Summary: Generic development and debugging tools for PubSub-based event-driven architectures - Event Flow Visualization, Event Recording, and Scenario Testing with Chaos Engineering
Author-email: venantvr <venantvr@gmail.com>
License: MIT
Project-URL: Homepage, https://github.com/venantvr-trading/Python.PubSub.DevTools
Project-URL: Documentation, https://github.com/venantvr-trading/Python.PubSub.DevTools/wiki
Project-URL: Repository, https://github.com/venantvr-trading/Python.PubSub.DevTools
Project-URL: Issues, https://github.com/venantvr-trading/Python.PubSub.DevTools/issues
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Testing
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: flask>=2.0.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: pydantic>=2.0
Requires-Dist: pandas>=2.0.0
Requires-Dist: pydot>=1.4.0
Requires-Dist: matplotlib>=3.5.0
Requires-Dist: networkx>=2.8.0
Requires-Dist: click>=8.0.0
Requires-Dist: requests>=2.28.0
Provides-Extra: dev
Requires-Dist: setuptools>=65.0; extra == "dev"
Requires-Dist: wheel; extra == "dev"
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0; extra == "dev"
Requires-Dist: flake8>=6.0; extra == "dev"
Requires-Dist: mypy>=1.0; extra == "dev"
Requires-Dist: black>=23.0; extra == "dev"
Dynamic: license-file

# PubSub DevTools

**Une suite compl√®te d'outils de d√©veloppement et de d√©bogage pour architectures √©v√©nementielles bas√©es sur PubSub.**

Cette biblioth√®que est con√ßue comme un **outil d'aide au d√©veloppement** avec une API programmatique prioritaire. Les d√©veloppeurs peuvent facilement instancier et lancer
les serveurs directement depuis leur propre code (scripts de test, sessions de d√©bogage, IDE) tout en b√©n√©ficiant d'une CLI pratique pour une utilisation autonome.

## üéØ Fonctionnalit√©s

### üìä Event Flow Visualization

- Diagrammes interactifs de flux d'√©v√©nements
- Vues hi√©rarchiques et graphes complets
- Filtrage par namespace avec codage couleur
- Filtrage des √©v√©nements √©chou√©s/rejet√©s
- Support du mode sombre
- Rendu professionnel avec GraphViz

### üé¨ Event Recorder & Replayer

- Enregistrement de flux d'√©v√©nements avec timestamps
- Tableau de bord web pour parcourir les sessions
- Filtrage et analyse des s√©quences d'√©v√©nements
- Statistiques d√©taill√©es par enregistrement
- Analyse de fr√©quence des √©v√©nements

### üé∞ Mock Exchange Simulator

- Simulation de march√© en temps r√©el
- Sc√©narios multiples (tendance, volatilit√©, crash)
- Configuration de prix initial, volatilit√© et spread
- Visualisation interactive des prix

### üéØ Scenario Testing Framework

- Moteur de sc√©narios agnostique au domaine
- G√©n√©ration de donn√©es avec profils configurables
- Ing√©nierie du chaos (d√©lais, √©checs, corruption)
- V√©rification automatique d'assertions
- Support multi-phases
- Rapports de tests complets

## Installation

```bash
pip install python_pubsub_devtools
```

Or install from source:

```bash
git clone <repository>
cd Python.PubSub.DevTools
pip install -e .
```

## üöÄ D√©marrage Rapide

### 1. Configuration

Cr√©ez un fichier `devtools_config.yaml` √† la racine de votre projet :

```bash
# G√©n√©rer un fichier de configuration exemple
pubsub-tools config-example -o devtools_config.yaml
```

Puis √©ditez le fichier pour ajuster les chemins :

```yaml
# Configuration PubSub DevTools
agents_dir: "./agents"
events_dir: "./events"
recordings_dir: "./recordings"
scenarios_dir: "./scenarios"
reports_dir: "./reports"

event_flow:
  port: 5555

event_recorder:
  port: 5556

mock_exchange:
  port: 5557

scenario_testing:
  port: 5558
```

### 2. Utilisation CLI

```bash
# Lancer un service sp√©cifique
pubsub-tools event-flow --config devtools_config.yaml
pubsub-tools event-recorder --config devtools_config.yaml
pubsub-tools mock-exchange --config devtools_config.yaml
pubsub-tools scenario-testing --config devtools_config.yaml

# Lancer tous les services simultan√©ment
pubsub-tools serve-all --config devtools_config.yaml
```

**Services disponibles :**

| Service          | Port | Description                          |
|------------------|------|--------------------------------------|
| Event Flow       | 5555 | Visualisation des flux d'√©v√©nements  |
| Event Recorder   | 5556 | Enregistrement et rejeu d'√©v√©nements |
| Mock Exchange    | 5557 | Simulateur de march√©                 |
| Scenario Testing | 5558 | Tests de sc√©narios avec chaos        |

### 3. Utilisation Programmatique (Recommand√©)

L'API programmatique est l'interface principale pour int√©grer les outils dans vos scripts, tests ou IDE :

```python
from python_pubsub_devtools.config import DevToolsConfig
from python_pubsub_devtools.event_flow.server import EventFlowServer

# Charger la configuration depuis un fichier YAML
config = DevToolsConfig.from_yaml("devtools_config.yaml")

# Instancier et lancer un serveur (bloquant)
server = EventFlowServer(config.event_flow)
server.run()
```

**Lancer plusieurs serveurs en parall√®le :**

```python
import multiprocessing
from python_pubsub_devtools.config import DevToolsConfig
from python_pubsub_devtools.event_flow.server import EventFlowServer
from python_pubsub_devtools.event_recorder.server import EventRecorderServer

config = DevToolsConfig.from_yaml("devtools_config.yaml")

def run_event_flow():
    server = EventFlowServer(config.event_flow)
    server.run(host='0.0.0.0', debug=False)

def run_event_recorder():
    server = EventRecorderServer(config.event_recorder)
    server.run(host='0.0.0.0', debug=False)

# Lancer dans des processus s√©par√©s
processes = [
    multiprocessing.Process(target=run_event_flow),
    multiprocessing.Process(target=run_event_recorder),
]

for p in processes:
    p.start()
```

Voir `examples/basic_usage.py` pour plus d'exemples.

## Features Overview

### Event Flow Visualization

Visualize the complete event-driven architecture:

- **Publishers & Subscribers**: See who publishes and subscribes to which events
- **Event Namespaces**: Organize events by namespace with color coding
- **Interactive Diagrams**: Hierarchical tree and complete graph views
- **Filtering**: Filter by namespace, hide failed/rejected events
- **Dark Mode**: Comfortable visualization in any lighting condition
- **GraphViz Layout**: Professional-quality diagram rendering

### Event Recorder

Record and replay event streams for:

- **Debugging**: Analyze complex event sequences
- **Test Fixtures**: Create reproducible test scenarios
- **Performance Analysis**: Track event timing and frequency
- **Session Management**: Browse and compare multiple recordings
- **Statistics**: Event counts, duration, frequency analysis

### Generic Scenario Testing

Build domain-agnostic scenario tests:

- **Data Generation**: Pluggable data generators for any domain
- **Scenario Profiles**: Bull/bear markets, load patterns, failure modes, etc.
- **Chaos Engineering**: Inject delays, failures, data corruption
- **Assertions**: Built-in and custom assertion checkers
- **Multi-Phase**: Complex scenarios with multiple phases
- **Reporting**: Comprehensive test reports with statistics

## üèóÔ∏è Architecture

La biblioth√®que suit une architecture modulaire avec configuration centralis√©e :

```
python_pubsub_devtools/
‚îú‚îÄ‚îÄ config.py                    # Configuration Pydantic centralis√©e avec support YAML
‚îú‚îÄ‚îÄ cli/                         # Interface en ligne de commande unifi√©e
‚îÇ   ‚îî‚îÄ‚îÄ main.py                  # Commandes CLI avec Click
‚îú‚îÄ‚îÄ event_flow/                  # Visualisation des flux d'√©v√©nements
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             # API publique (EventFlowAnalyzer, EventFlowServer)
‚îÇ   ‚îú‚îÄ‚îÄ server.py               # Serveur Flask (Application Factory)
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # Routes Flask
‚îÇ   ‚îî‚îÄ‚îÄ analyze_event_flow.py  # Logique m√©tier d'analyse
‚îú‚îÄ‚îÄ event_recorder/              # Enregistrement et rejeu d'√©v√©nements
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             # API publique (EventRecorder, EventRecorderServer)
‚îÇ   ‚îú‚îÄ‚îÄ server.py               # Serveur Flask (Application Factory)
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # Routes Flask
‚îÇ   ‚îî‚îÄ‚îÄ event_recorder.py       # Logique m√©tier d'enregistrement
‚îú‚îÄ‚îÄ mock_exchange/               # Simulateur de march√©
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             # API publique (MockExchangeServer)
‚îÇ   ‚îú‚îÄ‚îÄ server.py               # Serveur Flask (Application Factory)
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # Routes Flask
‚îÇ   ‚îî‚îÄ‚îÄ scenario_exchange.py    # Moteur de simulation
‚îú‚îÄ‚îÄ scenario_testing/            # Tests de sc√©narios avec chaos
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             # API publique (ScenarioTestingServer)
‚îÇ   ‚îú‚îÄ‚îÄ server.py               # Serveur Flask (Application Factory)
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # Routes Flask
‚îÇ   ‚îú‚îÄ‚îÄ scenario_runner.py      # Moteur de sc√©narios
‚îÇ   ‚îú‚îÄ‚îÄ assertion_checker.py    # Syst√®me d'assertions
‚îÇ   ‚îî‚îÄ‚îÄ chaos_injector.py       # Ing√©nierie du chaos
‚îî‚îÄ‚îÄ web/                         # Assets web partag√©s
    ‚îú‚îÄ‚îÄ templates/              # Templates HTML Jinja2
    ‚îî‚îÄ‚îÄ static/                 # CSS, JavaScript, images
```

### Principes de conception

1. **API programmatique prioritaire** : Classes `...Server` stables pour int√©gration facile
2. **Application Factory Pattern** : Chaque service expose une fonction `create_app(config)`
3. **Configuration centralis√©e** : Fichier YAML unique avec validation Pydantic
4. **S√©paration des pr√©occupations** : Logique m√©tier, routes Flask et serveurs s√©par√©s
5. **Chemins relatifs intelligents** : R√©solution automatique par rapport au fichier de config

## Dependencies

- Flask >= 2.0.0 (Web interface)
- Click >= 8.0.0 (CLI)
- pydot >= 1.4.0 (Event flow diagrams)
- pandas >= 2.0.0 (Data analysis)
- matplotlib >= 3.5.0 (Visualization)
- networkx >= 2.8.0 (Graph analysis)
- PyYAML >= 6.0 (Configuration)
- Pydantic >= 2.0 (Data validation)

## Development

```bash
# Install development dependencies
pip install -e .[dev]

# Run tests
pytest

# Run linters
flake8 python_pubsub_devtools
mypy python_pubsub_devtools
```

## License

MIT License
